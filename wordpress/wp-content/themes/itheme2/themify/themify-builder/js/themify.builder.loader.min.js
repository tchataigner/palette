var tbLoaderVars,themifyBuilder;!function($,e,t,r){"use strict";$(t).ready(function(){var r=$(".themify_builder_content");r.length>0&&r.after('<a class="themify_builder_turn_on js-turn-on-builder" href="#"><span class="dashicons dashicons-edit"></span>'+tbLoaderVars.turnOnBuilder+"</a>"),$("#wp--wrap").remove(),$("body").on("click.tbloader",".toggle_tf_builder a:first, a.js-turn-on-builder",function(r){r.preventDefault(),$(".themify_builder_front_icon").parent().append($(tbLoaderVars.progress));var s=$.post(tbLoaderVars.ajaxurl,{action:"themify_builder_loader",scripts:tbLoaderVars.assets.scripts,styles:tbLoaderVars.assets.styles});s.fail(function(){e.console&&console.log("AJAX failed")}),s.done(function(r){try{r=$.parseJSON(r)}catch(s){return void(e.console&&console.log(r))}if(r){var a=0,i=0;r.styles&&(a=r.styles.length-1,$(r.styles).each(function(){tbLoaderVars.assets.styles.push(this.handle);var e=t.createElement("link");e.rel="stylesheet",e.href=this.src,e.id=this.handle+"-css",e.async=!1,e.onload=function(){0===a&&$("body").trigger("builderstylesloaded.themify"),a--},e.onerror=function(){a--},e&&t.getElementsByTagName("head")[0].appendChild(e)})),r.scripts&&(i=r.scripts.length-1,$(r.scripts).each(function(){var e=this.footer?"body":"head";if(tbLoaderVars.assets.scripts.push(this.handle),this.jsVars){var r=t.createElement("script"),s=t.createTextNode("//<![CDATA[ \n"+this.jsVars+"\n//]]>");r.type="text/javascript",r.appendChild(s),t.getElementsByTagName(e)[0].appendChild(r)}var a=t.createElement("script");a.type="text/javascript",a.src=this.src,a.id=this.handle,a.async=!1,a.onload=function(){0===i&&(themifyBuilder&&(themifyBuilder.post_ID=tbLoaderVars.post_ID),$("body").off("click.tbloader"),$("body").trigger("builderscriptsloaded.themify")),i--},a.onerror=function(){i--},t.getElementsByTagName(e)[0].appendChild(a)}))}})}),"#builder_active"===e.location.hash&&($(".toggle_tf_builder a:first").length>0?$(".toggle_tf_builder a:first").trigger("click"):$(".js-turn-on-builder").length>0&&$(".js-turn-on-builder").first().trigger("click"))})}(jQuery,window,document);